<mat-tree
  [dataSource]="dataSource"
  [treeControl]="treeControl"
  [trackBy]="trackBy"
  #tree
>
  <mat-tree-node
    *matTreeNodeDef="let node"
    matTreeNodePadding
    [matTreeNodePaddingIndent]="20"
    [class.high-light]="highLight(node)"
  >
    <ng-container *ngIf="node.expandable">
      <button
        class="tree-select"
        matTreeNodeToggle
        (click)="loadChildren(node)"
        [style.margin-left.px]="node.level == 0 ? 0 : 0"
      >
        <div
          class="select"
          [class.expanded]="treeControl.isExpanded(node)"
        ></div>
      </button>
    </ng-container>

    <!-- 占位符 -->
    <ng-container *ngIf="!node.expandable">
      <button class="tree-select" disabled></button>
    </ng-container>

    <ng-template [ngIf]="selectModel == TreeSelectEnum.Single">
      <div
        (click)="singleSelectNode(node)"
        style="
          flex-grow: 1;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        "
      >
        <i [class]="node.iconType"></i>
        {{ node.name }}
      </div>
    </ng-template>

    <ng-template [ngIf]="selectModel == TreeSelectEnum.Multiple">
      <mat-checkbox
        (change)="multipleSelectNode(node)"
        [checked]="selection.isSelected(node)"
        [indeterminate]="descendantsPartiallySelected(node)"
      >
        <i [class]="node.iconType"></i>
        {{ node.name }}
      </mat-checkbox>
    </ng-template>
  </mat-tree-node>
</mat-tree>
